# API E02 - REST & Client HTTP

## Menu du jour

```
=== Matin COURS ===

- Correction
  - Gestion de projet (user stories/wireframes)
  - Modélisation (MCD/MLD)

- Modélisation
  - Créer la BDD okanban
  - Réviser le SQL (CREATE TABLE)
  - Modèle Sequelize (`List`)
  - Script JS de creation des tables (DDL)
  - Script JS d'échantillonnage (DML)

- Architecture
  - ECMAScript Modules (ESM)
  - Serveur Express (`GET /lists`)
  - Spécifications REST

- Gitflow

=== Aprem ATELIER ===

- API REST
  - GET /lists
  - GET /lists/:id
  - POST /lists
  - PATCH /lists/:id
  - DELETE /lists

- Modèles Sequelize
  - Card & Tags
  - Associations
  - Compléter la création des tables
  - Compléter l'échantillonnage des tables
```



## Client HTTP

- Un client HTTP est un outil permettant de réaliser des requêtes HTTP. Il en existe beaucoup, dans presque tous les languages, et y compris des outils de test.

Exemples : 
- `Chrome` via la barre d'URL (`GET`) via des formulaires (`GET`, `POST`)
- `fetch` (JavaScript)
- `cURL` (Terminal, pour tester ou pour écrire des scripts Bash)
- `Insomnia` / `Postman` (GUI, principalement pour tester des API, y compris les API qu'on est en train de construire)



## Snippet

`Snippet` = bout de code

- Snippet niveau système :
  - MacOS : Alfred ($$) / Espanso (gratuit)
  - Linux : Espanso
  - Window: Espanso

- Snippet niveau VSCode : 
  - `CTRL + SHIFT + P` : ouvrir la palette de commande
  - `Snippets: Configure Snippets`

- **ATTENTION** : 
  - avec parcimonie
  - je cherche un bout de code 1 fois ; 2 fois ; 3 fois ; 4 fois -> je fais un snippets


## Postgres 

### Vocabulaire

- **Serveur** Postgres 
  - Utilisateurs ("admin de BDD")
  - Bases de données
    - Tables
      - Enregistrement

- **Client** Postgres 
  - `pg` (Node.js)
  - `psql` (CLI)
  - `sequelize` (Node.js, qui utilise `pg` sous le capôt)

### Créer l'utitilisateur et la BDD

- Se conecter à Postgres : 
  - `sudo -i -u postgres psql`

- Créer un utilisateur : 
  - `CREATE ROLE okanban WITH LOGIN PASSWORD 'okanban';`
  - Vérification : `\du`

- Créer une BDD : 
  - `CREATE DATABASE okanban WITH OWNER okanban;`
  - Vérification : `\l`

- Se déplacer sur cette base 
  - `\c okanban okanban`

- Exécuter un script dans cette base  
  - `\i <chemin_du_script>`
